预处理出 $\dfrac{n}{B}$ 个 bitset，表示从第 $1$ 块到第 $i$ 块中每个数出现次数的奇偶性，由于整块的答案不好合并，所以直接预处理出任意两块间的答案（从第 $i$ 块到第 $j$ 块出现了偶数次的数的个数），再用上述 bitset 维护散块贡献即可。时间复杂度为 $O(n\sqrt{n})$，空间复杂度 $O(\dfrac{n \sqrt{n}}{w})$。